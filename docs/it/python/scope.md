#作用域

##定义

标识符的作用域定义了在程序中的可应用范围，或者说变量的可见性。

作用域有全局作用域和局部作用域。
作用域通常和命名空间相关。
命名空间是名称到对象的映射，作用域是名称可应用的范围。

标识符查找顺序：

+   当前函数的命名空间
+   所有父函数的命名空间
+   模块的命名空间
+   内置名称的命名空间

函数的全局作用域是函数定义所在的模块，与函数调用的位置无关。
局部变量会隐藏同名的全局变量。

##global

声明变量为全局变量，必须先声明，再赋值。

```
x=1
def f():
    x = 2

f()
print(x) # 1

########

x=1
def f():
    global x
    x = 2

f()
print(x) # 2
```

##nonlocal

声明变量为外围作用域的非全局变量

```
def f():
    x=1
    def f1():
        nonlocal x
        x=2
    f1()
    print(x)

f() # 2
```

##闭包

函数可以嵌套定义，内部函数对外部函数的变量进行引用，内部函数就是闭包。被引用的变量叫自由变量。外部函数返回的闭包还可以访问自由变量，自由变量的值是由函数定义时决定，和函数调用无关。

```
def f(factor):
 def f1(number):
  return factor+number
 return f1

x=f(3)
print(x(1))
```

可通过函数的属性`__closure__`访问闭包的自由变量，是一个元组。